<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Advanced headset monitoring system for ground crew operations. Track lost units, monitor damage, and manage headset condition status in real-time." />
    <title>AeroTag - Ground Crew Headset Monitoring System</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @layer base {
            * {
                box-sizing: border-box;
            }
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }
        
        /* Modal animations */
        .modal-overlay {
            animation: fadeIn 0.2s ease-out;
        }
        
        .modal-content {
            animation: slideUp 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Toast notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1e293b;
            color: white;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            animation: slideInRight 0.3s ease-out;
            max-width: 400px;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .toast.destructive {
            background: #7f1d1d;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col bg-slate-950">
    <!-- Header -->
    <header class="border-b border-slate-800 bg-slate-950/80 backdrop-blur-lg sticky top-0 z-50" id="header">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center">
                        <i data-lucide="headphones" class="w-6 h-6 text-white"></i>
                    </div>
                    <span class="text-xl font-bold text-white">AeroTag</span>
                </div>
                
                <nav class="hidden md:flex items-center gap-8">
                    <a href="#features" class="text-slate-300 hover:text-white transition-colors">Features</a>
                    <a href="#about" class="text-slate-300 hover:text-white transition-colors">About</a>
                    <a href="#contact" class="text-slate-300 hover:text-white transition-colors">Contact</a>
                </nav>

                <div class="flex items-center gap-3">
                    <button onclick="openAuthModal('login')" class="px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors">
                        Log In
                    </button>
                    <button onclick="openAuthModal('signup')" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white rounded-md transition-colors">
                        Sign Up
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard (Hidden by default) -->
    <div id="dashboard" class="hidden min-h-screen flex flex-col bg-slate-950">
        <!-- Dashboard Header -->
        <header class="border-b border-slate-800 bg-slate-950/80 backdrop-blur-lg sticky top-0 z-50">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center">
                            <i data-lucide="headphones" class="w-6 h-6 text-white"></i>
                        </div>
                        <span class="text-xl font-bold text-white">AeroTag Dashboard</span>
                    </div>
                    <div class="flex items-center gap-4">
                        <span id="userName" class="text-slate-300 text-sm"></span>
                        <button onclick="handleLogout()" class="px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors flex items-center gap-2">
                            <i data-lucide="log-out" class="w-4 h-4"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Layout with Sidebar -->
        <div class="flex flex-1 overflow-hidden">
            <!-- Sidebar -->
            <aside class="w-64 bg-slate-900/50 border-r border-slate-800 flex-shrink-0">
                <nav class="p-4 space-y-2">
                    <button 
                        id="tab-home"
                        data-tab="home"
                        class="sidebar-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors rounded-lg bg-blue-600 text-white"
                    >
                        <i data-lucide="home" class="w-5 h-5"></i>
                        <span>Home</span>
                    </button>
                    <button 
                        id="tab-headset"
                        data-tab="headset"
                        class="sidebar-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white"
                    >
                        <i data-lucide="headphones" class="w-5 h-5"></i>
                        <span>Headset Status</span>
                    </button>
                    <button 
                        id="tab-manage"
                        data-tab="manage"
                        class="sidebar-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium transition-colors rounded-lg text-slate-300 hover:bg-slate-800 hover:text-white hidden"
                    >
                        <i data-lucide="settings" class="w-5 h-5"></i>
                        <span>Manage Tags</span>
                    </button>
                </nav>
            </aside>

            <!-- Dashboard Content -->
            <main class="flex-1 overflow-y-auto">
                <div class="container mx-auto px-4 py-8">
            <!-- Home Tab Content -->
            <div id="content-home" class="dashboard-content">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Welcome to AeroTag!</h1>
                    <p class="text-slate-400">Monitor and manage your headset fleet from here.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Total Tags</h3>
                            <i data-lucide="headphones" class="w-5 h-5 text-blue-400"></i>
                        </div>
                        <p class="text-3xl font-bold text-white" id="totalTags">0</p>
                        <p class="text-slate-400 text-sm mt-2">Active units</p>
                    </div>

                    <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Unsafe</h3>
                            <i data-lucide="alert-triangle" class="w-5 h-5 text-red-400"></i>
                        </div>
                        <p class="text-3xl font-bold text-white" id="unsafeTags">0</p>
                        <p class="text-slate-400 text-sm mt-2">Requires attention</p>
                    </div>

                    <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-slate-300 text-sm font-medium">Disconnected</h3>
                            <i data-lucide="wifi-off" class="w-5 h-5 text-orange-400"></i>
                        </div>
                        <p class="text-3xl font-bold text-white" id="disconnectedTags">0</p>
                        <p class="text-slate-400 text-sm mt-2">Offline units</p>
                    </div>
                </div>
            </div>

            <!-- Headset Status Tab Content -->
            <div id="content-headset" class="dashboard-content hidden">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Headset Status</h1>
                    <p class="text-slate-400">View and manage all AeroTag units in your fleet.</p>
                </div>

                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Tag</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Status</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Battery</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Location</th>
                            </tr>
                        </thead>
                        <tbody id="tagsTableBody">
                            <!-- Tags will be dynamically loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Manage Tags Tab Content (Admin Only) -->
            <div id="content-manage" class="dashboard-content hidden">
                <div class="mb-8">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-3xl font-bold text-white mb-2">Manage Tags</h1>
                            <p class="text-slate-400">Create, edit, and delete AeroTag units.</p>
                        </div>
                        <button 
                            onclick="openCreateTagModal()"
                            class="px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white rounded-md transition-colors flex items-center gap-2"
                        >
                            <i data-lucide="plus" class="w-4 h-4"></i>
                            Create New Tag
                        </button>
                    </div>
                </div>

                <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Tag</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Status</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Battery</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Location</th>
                                <th class="text-left py-4 px-4 text-slate-300 font-semibold">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="manageTagsTableBody">
                            <!-- Tags will be dynamically loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

                </div>
            </main>
        </div>
    </div>

    <!-- Main Content (Landing Page) -->
    <main id="landingPage" class="flex-1">
        <!-- Hero Section -->
        <section class="relative py-20 md:py-32 overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-br from-blue-600/20 via-slate-950 to-cyan-600/20"></div>
            
            <div class="absolute inset-0">
                <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div>
                <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-3xl"></div>
            </div>

            <div class="container mx-auto px-4 relative z-10">
                <div class="max-w-4xl mx-auto text-center">
                    <div class="mb-6 flex justify-center">
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-blue-500/10 border border-blue-500/20 rounded-full">
                            <i data-lucide="headphones" class="w-5 h-5 text-blue-400"></i>
                            <span class="text-sm text-blue-300">Professional Ground Crew Solution</span>
                        </div>
                    </div>

                    <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-white via-blue-100 to-cyan-200 bg-clip-text text-transparent">
                        Never Lose Track of Your Headsets Again
                    </h1>

                    <p class="text-xl text-slate-300 mb-10 max-w-2xl mx-auto">
                        Advanced monitoring system for ground crew operations. Track lost units, monitor damage, and manage headset condition status in real-time.
                    </p>

                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <button 
                            onclick="openAuthModal('signup')"
                            class="bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white px-8 py-6 text-lg rounded-md transition-colors flex items-center gap-2 group"
                        >
                            Get Started
                            <i data-lucide="arrow-right" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </div>

                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20 bg-slate-900/50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <span class="text-cyan-400 font-semibold text-sm uppercase tracking-wider">Features</span>
                    <h2 class="text-3xl md:text-4xl font-bold mt-2 mb-4 text-white">
                        Everything You Need to Manage Your Fleet
                    </h2>
                    <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                        Comprehensive headset monitoring and management tools designed for ground crew operations
                    </p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center mb-4">
                            <i data-lucide="map-pin" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Track Lost Units</h3>
                        <p class="text-slate-400">Real-time GPS tracking and last-known location reporting for misplaced headsets. Never lose valuable equipment again.</p>
                    </div>

                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-orange-500 to-red-400 flex items-center justify-center mb-4">
                            <i data-lucide="alert-triangle" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Damage Detection</h3>
                        <p class="text-slate-400">Automated damage alerts and visual inspection logs. Keep your equipment in top condition with proactive monitoring.</p>
                    </div>

                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-green-500 to-emerald-400 flex items-center justify-center mb-4">
                            <i data-lucide="activity" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Condition Status</h3>
                        <p class="text-slate-400">Comprehensive health monitoring with detailed condition reports. Track usage patterns and maintenance schedules.</p>
                    </div>

                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-pink-400 flex items-center justify-center mb-4">
                            <i data-lucide="bar-chart-3" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Analytics Dashboard</h3>
                        <p class="text-slate-400">Powerful insights into equipment utilization, costs, and lifecycle management with customizable reports.</p>
                    </div>

                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-500 to-blue-400 flex items-center justify-center mb-4">
                            <i data-lucide="shield" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Secure & Reliable</h3>
                        <p class="text-slate-400">Enterprise-grade security with encrypted data storage and role-based access control for your team.</p>
                    </div>

                    <div class="bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-6 hover:border-slate-600 transition-all duration-300 hover:-translate-y-1">
                        <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-400 flex items-center justify-center mb-4">
                            <i data-lucide="zap" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Instant Alerts</h3>
                        <p class="text-slate-400">Real-time notifications for critical events. Stay informed with SMS, email, and in-app alerts.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 bg-slate-950">
        <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto text-center">
                    <span class="text-cyan-400 font-semibold text-sm uppercase tracking-wider">About</span>
                    <h2 class="text-3xl md:text-4xl font-bold mt-2 mb-6 text-white">
                        About AeroTag
                    </h2>
                    <p class="text-slate-400 text-lg mb-8 max-w-2xl mx-auto">
                        AeroTag is a comprehensive headset monitoring system designed specifically for ground crew operations. Our mission is to help aviation teams track, manage, and maintain their critical communication equipment with ease and efficiency.
                    </p>
                    <div class="grid md:grid-cols-2 gap-8 text-left">
                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                            <h3 class="text-xl font-bold text-white mb-3">Our Mission</h3>
                            <p class="text-slate-400">
                                To provide ground crew teams with reliable, real-time tracking and management solutions that ensure equipment accountability and operational efficiency.
                            </p>
                        </div>
                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6">
                            <h3 class="text-xl font-bold text-white mb-3">Why Choose Us</h3>
                            <p class="text-slate-400">
                                Built by future aviation professionals. We understand the unique challenges of ground crew operations and have designed our system to address them directly.
                    </p>
                </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-slate-900/50">
            <div class="container mx-auto px-4">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-16">
                        <span class="text-cyan-400 font-semibold text-sm uppercase tracking-wider">Contact</span>
                        <h2 class="text-3xl md:text-4xl font-bold mt-2 mb-4 text-white">
                            Get in Touch
                        </h2>
                        <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                            Have questions or need support? We're here to help.
                        </p>
                </div>

                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 text-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <i data-lucide="mail" class="w-6 h-6 text-white"></i>
                            </div>
                            <h3 class="text-white font-semibold mb-2">Email</h3>
                            <p class="text-slate-400 text-sm">aerotag2025@gmail.com</p>
                </div>

                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 text-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <i data-lucide="phone" class="w-6 h-6 text-white"></i>
                        </div>
                            <h3 class="text-white font-semibold mb-2">Phone</h3>
                            <p class="text-slate-400 text-sm">+1 (555) 123-4567</p>
                        </div>

                        <div class="bg-slate-800/50 border border-slate-700 rounded-xl p-6 text-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center mx-auto mb-4">
                                <i data-lucide="map-pin" class="w-6 h-6 text-white"></i>
                        </div>
                            <h3 class="text-white font-semibold mb-2">Location</h3>
                            <p class="text-slate-400 text-sm">Batangas, Philippines</p>
                    </div>
                </div>
            </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
            <div class="border-t border-slate-800 pt-8">
                <div class="text-center">
                    <p class="text-slate-400 text-sm">
                        © 2025 AeroTag. All rights reserved.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div id="authModal" class="hidden fixed inset-0 z-50 modal-overlay">
        <div class="fixed inset-0 bg-black/50" onclick="closeAuthModal()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-slate-900 border border-slate-800 rounded-lg shadow-xl max-w-md w-full modal-content">
                <div class="p-6">
                    <div class="flex items-center justify-center mb-4">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-400 rounded-lg flex items-center justify-center">
                            <i data-lucide="headphones" class="w-7 h-7 text-white"></i>
                        </div>
                    </div>
                    <h2 class="text-center text-2xl text-white mb-6">
                        Welcome to AeroTag
                    </h2>

                    <!-- Tabs -->
                    <div class="mb-6">
                        <div class="grid grid-cols-2 bg-slate-800 rounded-lg p-1">
                            <button 
                                id="loginTab" 
                                onclick="switchTab('login')"
                                class="px-4 py-2 rounded-md text-sm font-medium transition-colors bg-slate-700 text-white"
                            >
                                Log In
                            </button>
                            <button 
                                id="signupTab" 
                                onclick="switchTab('signup')"
                                class="px-4 py-2 rounded-md text-sm font-medium transition-colors text-slate-300 hover:text-white"
                            >
                                Sign Up
                            </button>
                        </div>
                    </div>

                    <!-- Login Form -->
                    <div id="loginForm" class="space-y-4">
                        <form onsubmit="handleLogin(event)" class="space-y-4">
                            <div class="space-y-2">
                                <label for="login-email" class="text-slate-200 text-sm font-medium">Email</label>
                                <div class="relative">
                                    <i data-lucide="mail" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="login-email"
                                        type="email"
                                        placeholder="you@example.com"
                                        class="w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label for="login-password" class="text-slate-200 text-sm font-medium">Password</label>
                                <div class="relative">
                                    <i data-lucide="lock" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="login-password"
                                        type="password"
                                        placeholder="••••••••"
                                        class="w-full pl-10 pr-12 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                    <button
                                        type="button"
                                        onclick="togglePasswordVisibility('login-password', 'login-password-eye')"
                                        class="absolute right-3 top-3 text-slate-400 hover:text-white transition-colors"
                                        id="login-password-eye"
                                    >
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <button 
                                type="submit" 
                                class="w-full bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white py-3 rounded-md transition-colors font-medium"
                            >
                                Log In
                            </button>
                        </form>
                    </div>

                    <!-- Signup Form -->
                    <div id="signupForm" class="space-y-4 hidden">
                        <form onsubmit="handleSignup(event)" class="space-y-4">
                            <div class="space-y-2">
                                <label for="signup-name" class="text-slate-200 text-sm font-medium">Full Name</label>
                                <div class="relative">
                                    <i data-lucide="user" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="signup-name"
                                        type="text"
                                        placeholder="John Doe"
                                        class="w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label for="signup-email" class="text-slate-200 text-sm font-medium">Email</label>
                                <div class="relative">
                                    <i data-lucide="mail" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="signup-email"
                                        type="email"
                                        placeholder="you@example.com"
                                        class="w-full pl-10 pr-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label for="signup-password" class="text-slate-200 text-sm font-medium">Password</label>
                                <div class="relative">
                                    <i data-lucide="lock" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="signup-password"
                                        type="password"
                                        placeholder="••••••••"
                                        class="w-full pl-10 pr-12 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                    <button
                                        type="button"
                                        onclick="togglePasswordVisibility('signup-password', 'signup-password-eye')"
                                        class="absolute right-3 top-3 text-slate-400 hover:text-white transition-colors"
                                        id="signup-password-eye"
                                    >
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="space-y-2">
                                <label for="signup-confirm-password" class="text-slate-200 text-sm font-medium">Confirm Password</label>
                                <div class="relative">
                                    <i data-lucide="lock" class="absolute left-3 top-3 w-4 h-4 text-slate-400"></i>
                                    <input
                                        id="signup-confirm-password"
                                        type="password"
                                        placeholder="••••••••"
                                        class="w-full pl-10 pr-12 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        required
                                    />
                                    <button
                                        type="button"
                                        onclick="togglePasswordVisibility('signup-confirm-password', 'signup-confirm-password-eye')"
                                        class="absolute right-3 top-3 text-slate-400 hover:text-white transition-colors"
                                        id="signup-confirm-password-eye"
                                    >
                                        <i data-lucide="eye" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="flex items-start space-x-2">
                                <input type="checkbox" id="terms" required class="w-4 h-4 rounded border-slate-700 bg-slate-800 text-blue-600 focus:ring-blue-500 mt-1" />
                                <label for="terms" class="text-sm text-slate-300 cursor-pointer">
                                    I agree to the <a href="#terms" class="text-cyan-400 hover:text-cyan-300">Terms of Service</a> and <a href="#privacy" class="text-cyan-400 hover:text-cyan-300">Privacy Policy</a>
                                </label>
                            </div>

                            <button 
                                type="submit" 
                                class="w-full bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white py-3 rounded-md transition-colors font-medium"
                            >
                                Create Account
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create/Edit Tag Modal -->
    <div id="tagModal" class="hidden fixed inset-0 z-50 modal-overlay">
        <div class="fixed inset-0 bg-black/50" onclick="closeTagModal()"></div>
        <div class="fixed inset-0 flex items-center justify-center p-4">
            <div class="bg-slate-900 border border-slate-800 rounded-lg shadow-xl max-w-md w-full modal-content">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl text-white font-bold" id="tagModalTitle">Create New Tag</h2>
                        <button onclick="closeTagModal()" class="text-slate-400 hover:text-white">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                    </div>

                    <form onsubmit="handleTagSubmit(event)" class="space-y-4">
                        <input type="hidden" id="tagId" />
                        
                        <div class="space-y-2">
                            <label for="tagName" class="text-slate-200 text-sm font-medium">Tag Name</label>
                            <input
                                id="tagName"
                                type="text"
                                placeholder="AeroTag-1"
                                class="w-full px-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required
                            />
                        </div>

                        <div class="space-y-2">
                            <label for="tagStatus" class="text-slate-200 text-sm font-medium">Status</label>
                            <select
                                id="tagStatus"
                                class="w-full px-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required
                            >
                                <option value="Safe">Safe</option>
                                <option value="Unsafe">Unsafe</option>
                                <option value="Disconnected">Disconnected</option>
                            </select>
                        </div>

                        <div class="space-y-2">
                            <label for="tagBattery" class="text-slate-200 text-sm font-medium">Battery (%)</label>
                            <input
                                id="tagBattery"
                                type="number"
                                min="0"
                                max="100"
                                placeholder="85"
                                class="w-full px-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            />
                            <p class="text-slate-400 text-xs">Leave empty if disconnected</p>
                        </div>

                        <div class="space-y-2">
                            <label for="tagLocation" class="text-slate-200 text-sm font-medium">Location</label>
                            <input
                                id="tagLocation"
                                type="text"
                                placeholder="Hangar 1"
                                class="w-full px-4 py-3 bg-slate-800 border border-slate-700 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                required
                            />
                        </div>

                        <div class="flex gap-4 pt-4">
                            <button 
                                type="button"
                                onclick="closeTagModal()"
                                class="flex-1 px-4 py-2 border border-slate-700 text-slate-300 hover:text-white hover:bg-slate-800 rounded-md transition-colors"
                            >
                                Cancel
                            </button>
                            <button 
                                type="submit"
                                class="flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 hover:from-blue-700 hover:to-cyan-600 text-white rounded-md transition-colors"
                            >
                                Save Tag
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Initialize admin account
        function initializeAdmin() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const adminExists = users.find(u => u.email === 'aerotag2025@gmail.com');
            
            if (!adminExists) {
                users.push({
                    name: 'Admin',
                    email: 'aerotag2025@gmail.com',
                    password: 'Aerotag_2025.',
                    role: 'admin'
                });
                localStorage.setItem('users', JSON.stringify(users));
            } else if (!adminExists.role) {
                adminExists.role = 'admin';
                localStorage.setItem('users', JSON.stringify(users));
            }
        }

        // Initialize default tags if none exist
        function initializeDefaultTags() {
            const tags = JSON.parse(localStorage.getItem('tags') || '[]');
            if (tags.length === 0) {
                const defaultTags = [
                    { id: 1, name: 'AeroTag-1', status: 'Safe', battery: 85, location: 'Hangar 1' },
                    { id: 2, name: 'AeroTag-2', status: 'Safe', battery: 42, location: 'Gate A' },
                    { id: 3, name: 'AeroTag-3', status: 'Unsafe', battery: 76, location: 'Ramp Area' },
                    { id: 4, name: 'AeroTag-4', status: 'Unsafe', battery: 29, location: 'Hangar 2' },
                    { id: 5, name: 'AeroTag-5', status: 'Disconnected', battery: null, location: 'Gate B' },
                    { id: 6, name: 'AeroTag-6', status: 'Disconnected', battery: null, location: 'Prep Area' }
                ];
                localStorage.setItem('tags', JSON.stringify(defaultTags));
            }
        }

        // Initialize on page load
        initializeAdmin();
        initializeDefaultTags();

        // Check if user is logged in on page load (after DOM is ready)
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(checkAuthStatus, 100);
            });
        } else {
            setTimeout(checkAuthStatus, 100);
        }

        // Modal state
        let currentMode = 'login';
        let currentDashboardTab = 'home';

        // Check if current user is admin
        function isAdmin() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === currentUser.email);
            return user && user.role === 'admin';
        }

        // Authentication functions
        function checkAuthStatus() {
            const user = localStorage.getItem('currentUser');
            if (user) {
                showDashboard();
            } else {
                showLandingPage();
            }
        }

        function showDashboard() {
            const dashboard = document.getElementById('dashboard');
            const landingPage = document.getElementById('landingPage');
            const header = document.getElementById('header');
            const footer = document.querySelector('footer');
            
            dashboard.classList.remove('hidden');
            landingPage.classList.add('hidden');
            if (header) header.classList.add('hidden');
            if (footer) footer.classList.add('hidden');
            
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (user) {
                document.getElementById('userName').textContent = user.name;
            }
            
            // Show/hide admin tabs
            const manageTab = document.getElementById('tab-manage');
            if (isAdmin()) {
                manageTab.classList.remove('hidden');
            } else {
                manageTab.classList.add('hidden');
            }
            
            switchDashboardTab('home');
            loadTags();
            updateHomeStats();
            lucide.createIcons();
            
            // Set up sidebar button listeners
            setTimeout(() => {
                setupSidebarListeners();
            }, 100);
        }

        function updateHomeStats() {
            loadTags(); // This will update stats
        }

        function showLandingPage() {
            const dashboard = document.getElementById('dashboard');
            const landingPage = document.getElementById('landingPage');
            const header = document.getElementById('header');
            const footer = document.querySelector('footer');
            
            dashboard.classList.add('hidden');
            landingPage.classList.remove('hidden');
            if (header) header.classList.remove('hidden');
            if (footer) footer.classList.remove('hidden');
            
            lucide.createIcons();
        }

        // Open auth modal
        function openAuthModal(mode) {
            currentMode = mode;
            const modal = document.getElementById('authModal');
            modal.classList.remove('hidden');
            switchTab(mode);
            // Re-initialize icons after showing modal
            setTimeout(() => lucide.createIcons(), 100);
        }

        // Close auth modal
        function closeAuthModal() {
            const modal = document.getElementById('authModal');
            modal.classList.add('hidden');
        }

        // Switch between login and signup tabs
        function switchTab(mode) {
            currentMode = mode;
            const loginTab = document.getElementById('loginTab');
            const signupTab = document.getElementById('signupTab');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');

            if (mode === 'login') {
                loginTab.classList.add('bg-slate-700', 'text-white');
                loginTab.classList.remove('text-slate-300');
                signupTab.classList.remove('bg-slate-700', 'text-white');
                signupTab.classList.add('text-slate-300');
                loginForm.classList.remove('hidden');
                signupForm.classList.add('hidden');
            } else {
                signupTab.classList.add('bg-slate-700', 'text-white');
                signupTab.classList.remove('text-slate-300');
                loginTab.classList.remove('bg-slate-700', 'text-white');
                loginTab.classList.add('text-slate-300');
                signupForm.classList.remove('hidden');
                loginForm.classList.add('hidden');
            }
            // Re-initialize icons
            lucide.createIcons();
        }

        // Dashboard tab switching
        function switchDashboardTab(tab) {
            if (!tab) {
                console.error('No tab specified');
                return;
            }
            
            currentDashboardTab = tab;
            
            // Update sidebar buttons
            const tabs = ['home', 'headset', 'manage'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                
                if (!tabBtn) {
                    console.error(`Tab button not found: tab-${t}`);
                    return;
                }
                
                if (!content) {
                    console.error(`Content not found: content-${t}`);
                    return;
                }
                
                if (t === tab) {
                    // Active state - blue background, white text
                    tabBtn.classList.remove('text-slate-300');
                    tabBtn.classList.add('bg-blue-600', 'text-white');
                    // Remove hidden class to show content
                    content.classList.remove('hidden');
                } else {
                    // Inactive state - transparent background, slate text
                    tabBtn.classList.remove('bg-blue-600', 'text-white');
                    tabBtn.classList.add('text-slate-300');
                    // Add hidden class to hide content
                    content.classList.add('hidden');
                }
            });
            
            // Load tags when switching to headset or manage tab
            if (tab === 'headset' || tab === 'manage') {
                setTimeout(() => {
                    loadTags();
                }, 100);
            }
            
            // Re-initialize icons after a short delay to ensure DOM is updated
            setTimeout(() => {
                lucide.createIcons();
            }, 50);
        }
        
        // Make functions globally accessible
        window.switchDashboardTab = switchDashboardTab;
        window.setupSidebarListeners = setupSidebarListeners;
        window.showDashboard = showDashboard;
        window.openCreateTagModal = openCreateTagModal;
        window.closeTagModal = closeTagModal;
        window.editTag = editTag;
        window.deleteTag = deleteTag;
        window.handleTagSubmit = handleTagSubmit;
        window.handleLogin = handleLogin;
        window.handleSignup = handleSignup;
        window.handleLogout = handleLogout;
        window.openAuthModal = openAuthModal;
        window.closeAuthModal = closeAuthModal;
        
        // Set up event listeners for sidebar buttons
        function setupSidebarListeners() {
            // Remove all existing listeners and add new ones
            const sidebarButtons = document.querySelectorAll('.sidebar-btn[data-tab]');
            if (sidebarButtons.length === 0) {
                // Buttons not found yet, try again after a short delay
                setTimeout(setupSidebarListeners, 200);
                return;
            }
            
            sidebarButtons.forEach(btn => {
                // Remove existing onclick to prevent duplicates
                btn.onclick = null;
                // Use onclick for reliable event handling
                const tab = btn.getAttribute('data-tab');
                if (tab) {
                    btn.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (window.switchDashboardTab) {
                            window.switchDashboardTab(tab);
                        } else {
                            switchDashboardTab(tab);
                        }
                    };
                }
            });
        }
        
        // Also set up listeners on page load (in case dashboard is already visible)
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(setupSidebarListeners, 100);
        });

        // Tag Management Functions
        function loadTags() {
            const tags = JSON.parse(localStorage.getItem('tags') || '[]');
            
            // Update home page stats
            const totalTagsEl = document.getElementById('totalTags');
            const unsafeTagsEl = document.getElementById('unsafeTags');
            const disconnectedTagsEl = document.getElementById('disconnectedTags');
            
            if (totalTagsEl) totalTagsEl.textContent = tags.length;
            if (unsafeTagsEl) unsafeTagsEl.textContent = tags.filter(t => t.status === 'Unsafe').length;
            if (disconnectedTagsEl) disconnectedTagsEl.textContent = tags.filter(t => t.status === 'Disconnected').length;
            
            // Load tags in Headset Status table
            const tagsTableBody = document.getElementById('tagsTableBody');
            if (tagsTableBody) {
                tagsTableBody.innerHTML = tags.map(tag => `
                    <tr class="border-b border-slate-700 hover:bg-slate-800/50">
                        <td class="py-4 px-4 text-white font-medium">${tag.name}</td>
                        <td class="py-4 px-4">
                            <span class="px-3 py-1 rounded text-xs font-medium ${
                                tag.status === 'Safe' ? 'bg-green-500/20 text-green-400' :
                                tag.status === 'Unsafe' ? 'bg-red-500/20 text-red-400' :
                                'bg-orange-500/20 text-orange-400'
                            }">${tag.status}</span>
                        </td>
                        <td class="py-4 px-4 text-white">${tag.battery !== null ? tag.battery + '%' : '-'}</td>
                        <td class="py-4 px-4 text-slate-300">${tag.location}</td>
                    </tr>
                `).join('');
            }
            
            // Load tags in Manage Tags table (admin only)
            if (isAdmin()) {
                const manageTableBody = document.getElementById('manageTagsTableBody');
                if (manageTableBody) {
                    manageTableBody.innerHTML = tags.map(tag => `
                        <tr class="border-b border-slate-700 hover:bg-slate-800/50">
                            <td class="py-4 px-4 text-white font-medium">${tag.name}</td>
                            <td class="py-4 px-4">
                                <span class="px-3 py-1 rounded text-xs font-medium ${
                                    tag.status === 'Safe' ? 'bg-green-500/20 text-green-400' :
                                    tag.status === 'Unsafe' ? 'bg-red-500/20 text-red-400' :
                                    'bg-orange-500/20 text-orange-400'
                                }">${tag.status}</span>
                            </td>
                            <td class="py-4 px-4 text-white">${tag.battery !== null ? tag.battery + '%' : '-'}</td>
                            <td class="py-4 px-4 text-slate-300">${tag.location}</td>
                            <td class="py-4 px-4">
                                <div class="flex gap-2">
                                    <button 
                                        onclick="editTag(${tag.id})"
                                        class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs transition-colors"
                                    >
                                        Edit
                                    </button>
                                    <button 
                                        onclick="deleteTag(${tag.id})"
                                        class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-xs transition-colors"
                                    >
                                        Delete
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `).join('');
                }
            }
            
            lucide.createIcons();
        }

        function openCreateTagModal() {
            document.getElementById('tagModalTitle').textContent = 'Create New Tag';
            document.getElementById('tagId').value = '';
            document.getElementById('tagName').value = '';
            document.getElementById('tagStatus').value = 'Safe';
            document.getElementById('tagBattery').value = '';
            document.getElementById('tagLocation').value = '';
            document.getElementById('tagModal').classList.remove('hidden');
            setTimeout(() => lucide.createIcons(), 100);
        }

        function closeTagModal() {
            document.getElementById('tagModal').classList.add('hidden');
        }

        function editTag(tagId) {
            const tags = JSON.parse(localStorage.getItem('tags') || '[]');
            const tag = tags.find(t => t.id === tagId);
            
            if (tag) {
                document.getElementById('tagModalTitle').textContent = 'Edit Tag';
                document.getElementById('tagId').value = tag.id;
                document.getElementById('tagName').value = tag.name;
                document.getElementById('tagStatus').value = tag.status;
                document.getElementById('tagBattery').value = tag.battery || '';
                document.getElementById('tagLocation').value = tag.location;
                document.getElementById('tagModal').classList.remove('hidden');
                setTimeout(() => lucide.createIcons(), 100);
            }
        }

        function deleteTag(tagId) {
            if (confirm('Are you sure you want to delete this tag?')) {
                const tags = JSON.parse(localStorage.getItem('tags') || '[]');
                const filteredTags = tags.filter(t => t.id !== tagId);
                localStorage.setItem('tags', JSON.stringify(filteredTags));
                loadTags();
                showToast('Tag Deleted', 'The tag has been successfully deleted.', 'default');
            }
        }

        function handleTagSubmit(event) {
            event.preventDefault();
            
            const tagId = document.getElementById('tagId').value;
            const name = document.getElementById('tagName').value;
            const status = document.getElementById('tagStatus').value;
            const battery = document.getElementById('tagBattery').value;
            const location = document.getElementById('tagLocation').value;
            
            const tags = JSON.parse(localStorage.getItem('tags') || '[]');
            
            if (tagId) {
                // Edit existing tag
                const tagIndex = tags.findIndex(t => t.id === parseInt(tagId));
                if (tagIndex !== -1) {
                    tags[tagIndex] = {
                        ...tags[tagIndex],
                        name: name,
                        status: status,
                        battery: battery ? parseInt(battery) : null,
                        location: location
                    };
                    showToast('Tag Updated', 'The tag has been successfully updated.', 'default');
                }
            } else {
                // Create new tag
                const newId = tags.length > 0 ? Math.max(...tags.map(t => t.id)) + 1 : 1;
                tags.push({
                    id: newId,
                    name: name,
                    status: status,
                    battery: battery ? parseInt(battery) : null,
                    location: location
                });
                showToast('Tag Created', 'The tag has been successfully created.', 'default');
            }
            
            localStorage.setItem('tags', JSON.stringify(tags));
            closeTagModal();
            loadTags();
        }

        // Toggle password visibility
        function togglePasswordVisibility(inputId, buttonId) {
            const input = document.getElementById(inputId);
            const button = document.getElementById(buttonId);
            
            if (!input || !button) return;
            
            const isPassword = input.type === 'password';
            input.type = isPassword ? 'text' : 'password';
            
            // Update icon
            const icon = button.querySelector('i');
            if (icon) {
                icon.setAttribute('data-lucide', isPassword ? 'eye-off' : 'eye');
                lucide.createIcons();
            }
        }
        
        // Make function globally accessible
        window.togglePasswordVisibility = togglePasswordVisibility;

        // Show toast notification
        function showToast(title, description, variant = 'default') {
            const toast = document.createElement('div');
            toast.className = `toast ${variant === 'destructive' ? 'destructive' : ''}`;
            toast.innerHTML = `
                <div class="font-semibold mb-1">${title}</div>
                <div class="text-sm text-slate-300">${description}</div>
            `;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Handle login form submission
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // Get users from localStorage
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            // Find user by email
            const user = users.find(u => u.email === email);
            
            if (!user) {
            showToast(
                    "Login Failed",
                    "No account found with this email address.",
                    "destructive"
                );
                return;
            }

            if (user.password !== password) {
                showToast(
                    "Login Failed",
                    "Incorrect password. Please try again.",
                    "destructive"
                );
                return;
            }

            // Store current user with role
            localStorage.setItem('currentUser', JSON.stringify({
                name: user.name,
                email: user.email,
                role: user.role || 'user'
            }));

            showToast(
                "Login Successful",
                "Welcome! Redirecting to dashboard...",
                "default"
            );

            closeAuthModal();
            setTimeout(() => {
                showDashboard();
            }, 500);
        }

        // Handle signup form submission
        function handleSignup(event) {
            event.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;

            if (password !== confirmPassword) {
                showToast(
                    "Password Mismatch",
                    "Passwords do not match. Please try again.",
                    "destructive"
                );
                return;
            }

            if (password.length < 6) {
            showToast(
                    "Password Too Short",
                    "Password must be at least 6 characters long.",
                    "destructive"
                );
                return;
            }

            // Get existing users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            // Check if email already exists
            if (users.find(u => u.email === email)) {
                showToast(
                    "Account Exists",
                    "An account with this email already exists. Please login instead.",
                    "destructive"
                );
                return;
            }

            // Add new user
            users.push({
                name: name,
                email: email,
                password: password
            });

            localStorage.setItem('users', JSON.stringify(users));

            // Store current user
            localStorage.setItem('currentUser', JSON.stringify({
                name: name,
                email: email,
                role: 'user'
            }));

            showToast(
                "Account Created",
                "Welcome! Your account has been created successfully.",
                "default"
            );

            closeAuthModal();
            setTimeout(() => {
                showDashboard();
            }, 500);
        }

        // Handle logout
        function handleLogout() {
            localStorage.removeItem('currentUser');
            showToast(
                "Logged Out",
                "You have been successfully logged out.",
                "default"
            );
            setTimeout(() => {
                showLandingPage();
            }, 500);
        }

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeAuthModal();
                closeTagModal();
            }
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && href !== '#forgot' && href !== '#terms' && href !== '#privacy' && href !== '#cookies') {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });

        // Re-initialize icons on scroll (for any dynamically loaded content)
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                lucide.createIcons();
            }, 100);
        });
    </script>
</body>
</html>

